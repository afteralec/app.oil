<main class="flex flex-col items-center justify-center">
  <div
    class="w-full border-t px-4 py-2 text-foreground md:w-[750px] lg:w-[1000px]"
  >
    <header class="py-2">
      <h1 class="text-xl font-semibold leading-none">Profile</h1>
    </header>
    <article x-data="getPlayerData()">
      <div class="flex flex-col gap-2 py-2">
        <h2 class="text-base font-semibold leading-none">Email</h2>
        {{ if .NoEmails }}
        <div
          class="flex w-[50%] items-center rounded-md bg-amber-100 px-4 py-3 text-sm text-amber-800"
        >
          <div class="pr-2">
            <div class="flex items-center justify-center rounded-[50%]">
              <iconify-icon
                icon="ant-design:exclamation-circle-outlined"
                height="32"
                width="32"
              ></iconify-icon>
            </div>
          </div>
          <div>
            You don't have any email addresses set. Without one, you won't be
            able to recover your account.
          </div>
        </div>
        {{- else }}
        <div class="flex w-[50%] flex-col gap-4 py-2">
          <div class="flex h-12 items-center" x-show="!addEmailMode">
            <button
              class="inline-flex h-10 items-center justify-center rounded-md bg-primary px-4 py-2 text-sm font-medium text-primary-foreground ring-offset-background transition-colors hover:bg-primary/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"
              type="button"
              @click="
                addEmailMode = true;
                $nextTick(() => {
                  setTimeout(() => {
                    document.getElementById('add-email').focus();
                  }, 50);
                });
              "
            >
              Add Email
            </button>
          </div>
          <form class="flex gap-2" x-cloak x-show="addEmailMode">
            <input
              id="add-email"
              class="flex h-12 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50"
              x-model="addEmail"
              @keydown.escape.prevent=""
              @keyup.escape="
                addEmailMode = false;
                addEmail = '';
            "
              placeholder=""
              name="add-email"
            />
            <div class="flex flex-col items-start gap-1 pt-2">
              <button
                type="submit"
                class="bg-none text-xs leading-none text-muted-foreground hover:text-primary hover:underline"
              >
                Save
              </button>
              <button
                type="button"
                @click="
                    addEmailMode = false;
                    addEmail = '';
                  "
                class="bg-none text-xs leading-none text-muted-foreground hover:text-primary hover:underline"
              >
                Cancel
              </button>
            </div>
          </form>
        </div>
        <div class="flex w-[50%] flex-col gap-3">
          <!-- prettier-ignore -->
          {{ range .Emails }}
            {{ template "web/views/partials/player/email" . }}
          {{- end }}
        </div>
      </div>
      {{- end }}
    </article>
  </div>
</main>
